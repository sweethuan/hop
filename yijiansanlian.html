<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>一键三连</title>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	</head>
	<body>
		<div id="app">
			<button @mousedown="down" @mouseup="up">收藏 {{num1}}</button>
			<button @click="btn2">点赞 {{num2}}</button>
			<button @click="btn3">投币 {{num3}}</button>
		</div>
		<script type="text/javascript">
			new Vue({
				el: "#app",
				data: {
					num1: 0,
					num2: 0,
					num3: 0,
					timer: null,
					startTime: null
				},
				methods: {
					btn1 () {
						this.num1++
					},
					btn2 () {
						this.num2++
					},
					btn3 () {
						this.num3++
					},
					sanlian() {
						this.num1++
						this.num2++
						this.num3++
					},
					down () {
						clearTimeout(this.timer);
						this.startTime =  new Date().getTime()
						this.timer = setTimeout(this.sanlian, 2000)
						console.log(this.timer)
					},
					up () {
						const nowTime = new Date().getTime()
						if (nowTime - this.startTime < 1000) { //点按仅触发点赞
						      this.btn1()
						      clearTimeout(this.timer);
						  } else if (nowTime - this.startTime < 2000) { //长按时间不足，不触发任何操作
						      clearTimeout(this.timer);
						  }
					}
						
				}
			})
		</script>
	</body>
</html>
